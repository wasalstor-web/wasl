<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆÙƒÙŠÙ„ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø°ÙƒÙŠ</title>
    <style>
        body {
            width: 350px;
            min-height: 400px;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            direction: rtl;
        }
        
        .header {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .header h1 {
            margin: 0;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .content {
            padding: 20px;
        }
        
        .command-input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 15px;
            box-sizing: border-box;
            direction: rtl;
        }
        
        .execute-btn {
            width: 100%;
            padding: 12px;
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-bottom: 15px;
        }
        
        .execute-btn:hover {
            background: #3367d6;
        }
        
        .google-features {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .google-features h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #fff;
        }
        
        .feature-btn {
            display: block;
            width: 100%;
            padding: 8px 12px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            margin-bottom: 5px;
            text-align: right;
            transition: background 0.3s;
        }
        
        .feature-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .examples {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
        }
        
        .examples h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
        }
        
        .example {
            background: rgba(255,255,255,0.1);
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .example:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .status {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 10px;
            margin-top: 15px;
            font-size: 12px;
            text-align: center;
        }
        
        .google-logo {
            display: inline-block;
            font-weight: bold;
            background: linear-gradient(45deg, #4285f4, #34a853, #fbbc05, #ea4335);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>
            ğŸ¤– ÙˆÙƒÙŠÙ„ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø°ÙƒÙŠ
            <span class="google-logo">Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ø¬ÙˆØ¬Ù„</span>
        </h1>
    </div>
    
    <div class="content">
        <input type="text" id="commandInput" class="command-input" 
               placeholder="Ø§ÙƒØªØ¨ Ø£Ù…Ø±Ùƒ Ù‡Ù†Ø§... (Ù…Ø«Ø§Ù„: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ wasl.store)">
        
        <button id="executeBtn" class="execute-btn">
            ğŸš€ ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø±
        </button>
        
        <div class="google-features">
            <h3>ğŸŒŸ Ù…Ù…ÙŠØ²Ø§Øª Ø¬ÙˆØ¬Ù„ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©</h3>
            <button class="feature-btn" onclick="executeCommand('Ø­Ù„Ù„ Ø§Ù„ØµÙØ­Ø©')">
                ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
            </button>
            <button class="feature-btn" onclick="executeCommand('Ø§Ù‚ØªØ±Ø­ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª')">
                ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø°ÙƒÙŠØ© Ù„Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
            </button>
            <button class="feature-btn" onclick="executeCommand('Ù„Ø®Øµ Ø§Ù„Ù…Ø­ØªÙˆÙ‰')">
                ğŸ“„ ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
            </button>
            <button class="feature-btn" onclick="executeCommand('Ø§ÙØªØ­ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„')">
                ğŸ—ºï¸ ÙØªØ­ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„
            </button>
            <button class="feature-btn" onclick="executeCommand('ØªØ±Ø¬Ù… Ø§Ù„ØµÙØ­Ø©')">
                ğŸŒ ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµÙØ­Ø©
            </button>
        </div>
        
        <div class="examples">
            <h3>ğŸ’¡ Ø£Ù…Ø«Ù„Ø© Ø³Ø±ÙŠØ¹Ø©</h3>
            
            <div class="example" onclick="setCommand(this.textContent)">
                Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ wasl.store
            </div>
            
            <div class="example" onclick="setCommand(this.textContent)">
                Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù†Ù‚Ù„ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶
            </div>
            
            <div class="example" onclick="setCommand(this.textContent)">
                Ø§Ù…Ù„Ø£ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù€ "Ø´Ø±ÙƒØ© Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹"
            </div>
            
            <div class="example" onclick="setCommand(this.textContent)">
                Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            </div>
            
            <div class="example" onclick="setCommand(this.textContent)">
                Ø§ÙØªØ­ Ù…ÙˆÙ‚Ø¹ google.com
            </div>
            
            <div class="example" onclick="setCommand(this.textContent)">
                Ø§Ø¨Ø­Ø« ÙÙŠ Ø¬ÙˆØ¬Ù„ Ø¹Ù† "Ù…Ù†ØµØ© ÙˆØ³Ù„"
            </div>
        </div>
        
        <div id="status" class="status">
            ğŸŸ¢ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ°
        </div>
    </div>

    <script>
        const commandInput = document.getElementById('commandInput');
        const executeBtn = document.getElementById('executeBtn');
        const status = document.getElementById('status');

        // Focus on input when popup opens
        window.addEventListener('load', () => {
            commandInput.focus();
        });

        // Execute command on Enter key
        commandInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                executeCommand();
            }
        });

        // Execute command on button click
        executeBtn.addEventListener('click', executeCommand);

        function executeCommand(command = null) {
            const cmd = command || commandInput.value.trim();
            
            if (!cmd) {
                updateStatus('âŒ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø£Ù…Ø± Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            updateStatus('â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...');

            // Send command to content script
            chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {
                chrome.tabs.sendMessage(tabs[0].id, {
                    action: 'executeCommand',
                    command: cmd
                }, (response) => {
                    if (chrome.runtime.lastError) {
                        updateStatus('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°');
                    } else {
                        updateStatus('âœ… ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨Ù†Ø¬Ø§Ø­');
                        if (!command) {
                            commandInput.value = '';
                        }
                        
                        // Close popup after successful execution
                        setTimeout(() => {
                            window.close();
                        }, 1000);
                    }
                });
            });

            // Track command usage
            if (typeof gtag !== 'undefined') {
                gtag('event', 'command_executed', {
                    command_type: cmd.split(' ')[0],
                    extension_version: '2.0'
                });
            }
        }

        function setCommand(command) {
            commandInput.value = command;
            commandInput.focus();
        }

        function updateStatus(message) {
            status.textContent = message;
            status.style.background = message.includes('âŒ') ? 'rgba(244, 67, 54, 0.3)' :
                                    message.includes('âœ…') ? 'rgba(76, 175, 80, 0.3)' :
                                    message.includes('â³') ? 'rgba(255, 193, 7, 0.3)' :
                                    'rgba(255,255,255,0.1)';
        }

        // Enhanced keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl+Shift+G for Google features
            if (e.ctrlKey && e.shiftKey && e.key === 'G') {
                executeCommand('Ø­Ù„Ù„ Ø§Ù„ØµÙØ­Ø©');
            }
            
            // Ctrl+Shift+M for Maps
            if (e.ctrlKey && e.shiftKey && e.key === 'M') {
                executeCommand('Ø§ÙØªØ­ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„');
            }
            
            // Ctrl+Shift+T for Translate
            if (e.ctrlKey && e.shiftKey && e.key === 'T') {
                executeCommand('ØªØ±Ø¬Ù… Ø§Ù„ØµÙØ­Ø©');
            }
        });

        // Add Google AI suggestions based on current page
        chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {
            const url = tabs[0].url;
            const suggestions = document.createElement('div');
            suggestions.className = 'google-features';
            suggestions.innerHTML = '<h3>ğŸ¯ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>';
            
            if (url.includes('google.com')) {
                suggestions.innerHTML += '<button class="feature-btn" onclick="executeCommand(\'Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØµØ© ÙˆØ³Ù„\')">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØµØ© ÙˆØ³Ù„</button>';
            } else if (url.includes('wasl.store')) {
                suggestions.innerHTML += '<button class="feature-btn" onclick="executeCommand(\'Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„\')">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>';
                suggestions.innerHTML += '<button class="feature-btn" onclick="executeCommand(\'Ø§ÙØªØ­ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª\')">ğŸ—ºï¸ Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>';
            } else {
                suggestions.innerHTML += '<button class="feature-btn" onclick="executeCommand(\'Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ wasl.store\')">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ÙˆØ³Ù„</button>';
            }
            
            document.querySelector('.content').appendChild(suggestions);
        });
    </script>
</body>
</html>